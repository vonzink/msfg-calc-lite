<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LLPA / LLPM Calculator - MSFG Home Loans</title>
  <link rel="stylesheet" href="/css/main.css" />
<style>
    /* LLPA Tool Specific Styles (inherits main.css) */
    .chips-row { display:flex; flex-wrap:wrap; gap:.75rem; margin: 0 0 1.25rem 0; }
    .chip {
      display:inline-flex; align-items:center; gap:.4rem;
      background: var(--light); border:1px solid var(--border);
      padding:.5rem .9rem; border-radius: 999px; font-size:.9rem; font-weight:600;
    }
    .chip strong { color: var(--primary); font-weight:800; }
    .grid-2 { display:grid; grid-template-columns: 1.1fr .9fr; gap: 1.25rem; }
    @media (max-width: 980px){ .grid-2 { grid-template-columns: 1fr; } }
    .section h3 { margin-top: 0; }
    .radio-row { display:flex; flex-wrap:wrap; gap:.75rem; }
    .radio-pill {
      border: 1px solid var(--border);
      background: var(--light);
      border-radius: 999px;
      padding: .45rem .75rem;
      display:flex; align-items:center; gap:.5rem;
      cursor:pointer;
      user-select:none;
      font-weight:600;
    }
    .radio-pill input { margin:0; }
    .toggle-row { display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:.65rem .75rem; border:1px solid var(--border); border-radius:10px; background: var(--light); }
    .toggle-row .label { font-weight:700; color: var(--dark); }
    .toggle-row .hint { font-size:.85rem; color: var(--gray); margin-top:.15rem; }
    .toggle-row .meta { display:flex; flex-direction:column; }
    .right { text-align:right; }
    .center { text-align:center; }
    .muted { color: var(--gray); }
    #warnings {
      display:none;
      background: #fff7e6;
      border: 1px solid #ffe0a3;
      color: #8a5a00;
      padding: .75rem 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
    }
    #warnings ul { margin: .5rem 0 0 1.2rem; }
    table { width:100%; border-collapse: collapse; }
    th, td { padding: .6rem .6rem; border-bottom: 1px solid var(--border); vertical-align: top; }
    th { text-align:left; color: var(--primary); font-size:.9rem; }
    .kv-grid { display:grid; grid-template-columns: 1fr 1fr; gap: .75rem; }
    .kv { background: var(--light); border:1px solid var(--border); border-radius: 10px; padding: .85rem; }
    .kv .k { color: var(--gray); font-size:.85rem; margin-bottom:.25rem; }
    .kv .v { font-size: 1.1rem; font-weight: 800; color: var(--dark); }
  </style>
</head>

<body>
  <div class="main-container">
    <div class="header">
      <img class="header-logo" src="/images/msfg-logo.png" alt="MSFG Home Loans" />
      <div class="header-text">
        <h1>LLPA / LLPM Calculator</h1>
        <p>Fannie Mae LLPA Matrix (01.28.2026). Conventional only. Values are in points.</p>
      </div>
    </div>

    <div id="warnings"></div>

    <div class="chips-row">
      <div class="chip" id="chipLTV">Gross LTV: <strong>0.00%</strong></div>
      <div class="chip" id="chipTotal">Total LLPAs: <strong>0.000</strong></div>
    </div>

    <div class="grid-2">
      <div class="section">
        <h3>Inputs</h3>

        <div class="input-grid">
          <div class="input-group">
            <label>Loan Amount</label>
            <input id="loanAmount" type="number" value="400000" min="0" step="1000" />
          </div>

          <div class="input-group">
            <label>Property Value</label>
            <input id="propertyValue" type="number" value="500000" min="0" step="1000" />
          </div>

          <div class="input-group">
            <label>Credit Score</label>
            <input id="creditScore" type="number" value="740" min="300" max="850" step="1" />
          </div>

          <div class="input-group">
            <label>Amortization Term (years)</label>
            <select id="termYears">
              <option value="30" selected>30</option>
              <option value="25">25</option>
              <option value="20">20</option>
              <option value="15">15</option>
              <option value="10">10</option>
            </select>
          </div>

          <div class="input-group">
            <label>Base Rate</label>
            <input id="baseRate" type="number" value="6.750" step="0.001" />
          </div>

          <div class="input-group">
            <label>Starting Points</label>
            <input id="startingPoints" type="number" value="0.000" step="0.001" />
          </div>

          <div class="input-group">
            <label>Base (Net) LTV for MMI (optional)</label>
            <input id="baseLTVForMMI" type="number" value="" placeholder="Defaults to gross LTV" step="0.01" />
          </div>

          <div class="input-group">
            <label>Units</label>
            <select id="units">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
            </select>
          </div>
        </div>

        <div style="margin-top:1rem;">
          <label style="display:block; margin-bottom:.5rem; font-weight:700;">Purpose</label>
          <div class="radio-row">
            <label class="radio-pill"><input type="radio" name="purpose" value="Purchase" checked /> Purchase</label>
            <label class="radio-pill"><input type="radio" name="purpose" value="LimitedCashOut" /> Limited cash-out</label>
            <label class="radio-pill"><input type="radio" name="purpose" value="CashOut" /> Cash-out</label>
          </div>
        </div>

        <div style="margin-top:1rem;">
          <label style="display:block; margin-bottom:.5rem; font-weight:700;">Product</label>
          <div class="radio-row">
            <label class="radio-pill"><input type="radio" name="productType" value="Fixed" checked /> Fixed</label>
            <label class="radio-pill"><input type="radio" name="productType" value="ARM" /> ARM</label>
          </div>
        </div>

        <div style="margin-top:1rem;">
          <label style="display:block; margin-bottom:.5rem; font-weight:700;">Occupancy</label>
          <div class="radio-row">
            <label class="radio-pill"><input type="radio" name="occupancy" value="Primary" checked /> Primary</label>
            <label class="radio-pill"><input type="radio" name="occupancy" value="SecondHome" /> Second home</label>
            <label class="radio-pill"><input type="radio" name="occupancy" value="Investment" /> Investment</label>
          </div>
        </div>

        <div style="margin-top:1rem; display:grid; gap:.75rem;">
          <div class="toggle-row">
            <div class="meta">
              <div class="label">Condo</div>
              <div class="hint">Applies Condo LLPA row</div>
            </div>
            <input id="isCondo" type="checkbox" />
          </div>

          <div class="toggle-row">
            <div class="meta">
              <div class="label">Manufactured home</div>
              <div class="hint">Applies Manufactured home LLPA row (SFC 235)</div>
            </div>
            <input id="isManufacturedHome" type="checkbox" />
          </div>

          <div class="toggle-row">
            <div class="meta">
              <div class="label">High-balance loan</div>
              <div class="hint">Uses High-balance fixed/ARM row (SFC 808)</div>
            </div>
            <input id="isHighBalance" type="checkbox" />
          </div>

          <div class="toggle-row">
            <div class="meta">
              <div class="label">Subordinate financing</div>
              <div class="hint">Applies Subordinate financing LLPA row</div>
            </div>
            <input id="hasSubordinateFinancing" type="checkbox" />
          </div>

          <div class="toggle-row" id="hlvrRow">
            <div class="meta">
              <div class="label">High LTV Refinance</div>
              <div class="hint">Applies cap table (Tables 1–3) and disables MMI</div>
            </div>
            <input id="isHighLTVRefi" type="checkbox" />
          </div>

          <div class="toggle-row" id="mmiRow">
            <div class="meta">
              <div class="label">Minimum MI coverage option (MMI)</div>
              <div class="hint">Applies the MMI grid (based on base/net LTV)</div>
            </div>
            <input id="applyMMI" type="checkbox" />
          </div>
        </div>

        <div style="margin-top:1.25rem;">
          <h3>LLPA Waivers</h3>
          <p class="muted" style="margin-top:-.5rem;">If toggled on, waives all LLPAs except MMI (per matrix).</p>

          <div style="display:grid; gap:.75rem;">
            <div class="toggle-row">
              <div class="meta">
                <div class="label">HomeReady®</div>
              </div>
              <input id="waiverHomeReady" type="checkbox" />
            </div>

            <div class="toggle-row">
              <div class="meta">
                <div class="label">First-time homebuyer</div>
                <div class="hint">Income/AMI checks not included (user decides)</div>
              </div>
              <input id="waiverFirstTimeHB" type="checkbox" />
            </div>

            <div class="toggle-row">
              <div class="meta">
                <div class="label">Duty to Serve</div>
                <div class="hint">User confirms eligibility</div>
              </div>
              <input id="waiverDutyToServe" type="checkbox" />
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>Results</h3>

        <div class="kv-grid" style="margin-bottom:1rem;">
          <div class="kv">
            <div class="k">Final Points (starting + LLPAs)</div>
            <div class="v" id="kvFinalPoints">0.000</div>
          </div>
          <div class="kv">
            <div class="k">Final Price (100 - points)</div>
            <div class="v" id="kvFinalPrice">100.000</div>
          </div>
          <div class="kv">
            <div class="k">Dollar Impact</div>
            <div class="v" id="kvDollarImpact">$0</div>
          </div>
          <div class="kv">
            <div class="k">Matrix Version</div>
            <div class="v">01.28.2026</div>
          </div>
        </div>

        <div class="results-section">
          <h4>Breakdown</h4>
          <div style="overflow:auto;">
            <table id="breakdownTable">
              <thead>
                <tr>
                  <th>Adjustment</th>
                  <th class="right">Points</th>
                  <th>Why</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <p class="muted" style="margin-top:1rem; font-size:.9rem;">
          Notes: Base tables are credit score × gross LTV (terms ≤ 15 years use 0.00 for the base table). MMI is based on base/net LTV.
        </p>
        <div class="section" style="margin-top:1rem;">
          <h3>Footnotes / Exclusions (disclosed, not enforced)</h3>
          <ul class="muted" style="margin: .5rem 0 0 1.1rem; font-size:.9rem; line-height:1.4;">
            <li><b>Condo</b> LLPA is not applicable to <b>co-ops</b> or <b>detached condo units</b> (SFC 588).</li>
            <li><b>Manufactured home</b> LLPA is not applicable to <b>MH Advantage</b> (SFC 859 combined with SFC 235).</li>
            <li><b>Subordinate financing</b> LLPA applies only when <b>CLTV &gt; LTV</b>, and is not applicable to <b>Community Seconds</b> (SFC 118).</li>
            <li><b>Student loan cash-out refinance</b> (SFC 841) uses <b>limited cash-out</b> refinance pricing.</li>
          </ul>
        </div>

      </div>
    </div>
  </div>

  <script type="module" src="./llpm-tool.js"></script>
  <script src="/js/shared/report-standalone.js"></script>
</body>
</html>
